# SQL事务

## 一、事务概念

    事务是一种机制、是一种操作序列，它包含了一组数据库操作命令，这组命令要么全部执行，要么全部不执行。因此事务是一个不可分割的工作逻辑单元。在数据库系统上执行并发操作时事务是作为最小的控制单元来使用的。这特别适用于多用户同时操作的数据通信系统。例如：订票、银行、保险公司以及证券交易系统等。

## 二、事务属性

### 事务4大属性：

* #### 原子性\(Atomicity\):事务是一个完整的操作。
* ####  一致性（Consistency）：当事务完成时，数据必须处于一致状态。
* ####  隔离性\(Isolation\):对数据进行修改的所有并发事务是彼此隔离的。
* ####  持久性\(Durability\):事务完成后，它对于系统的影响是永久性的。

## 三、创建事务

#### T-SQL中管理事务的语句：

* #### 开始事务: begin transaction
* #### 提交事务：commit transaction
* #### 回滚事务: rollback transaction

#### 事务分类:

* #### 显式事务:用begin transaction明确指定事务的开始。
* #### 隐性事务：打开隐性事务：set implicit\_transactions on，当以隐性事务模式操作时，SQL Servler将在提交或回滚事务后自动启动新事务。无法描述事务的开始，只需要提交或回滚事务。
* #### 自动提交事务：SQL Server的默认模式，它将每条单独的T-SQL语句视为一个事务。如果成功执行，则自动提交，否则回滚。



